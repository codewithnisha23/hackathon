<!DOCTYPE html>
<html>
<head>
  <title>Buyer Dashboard</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

</head>

  
<body>
    <div class="card">
        <h3>Notifications</h3>
        <ul id="notificationList"></ul>
      </div>
      


  <span id="time"></span>
  <div class="navbar">
    ReLoop – Waste Marketplace
  
    <img src="https://cdn-icons-png.flaticon.com/512/847/847969.png"
         width="32"
         style="float:right; cursor:pointer;"
         onclick="openProfile()">
  </div>
  
  
  
  <button onclick="logout()" style="float:right;">Logout</button>
</div>

  
<div class="card">
  
  <button onclick="showBuyer()">
    <i class="fa-solid fa-cart-shopping"></i> Buyer Panel
  </button>
</div>



<div class="stats-row">
  <div class="card">
    
  <h3><i class="fa fa-recycle"></i> Total Materials Listed</h3>
  <p id="totalMaterials">0</p>
</div>

<div class="card">
  <h3><i class="fa fa-users"></i> Active Suppliers</h3>
  <p id="activeSuppliers">0</p>
</div>

<div class="card">
  <h3><i class="fa fa-arrow-right-arrow-left"></i> Transactions Today</h3>
  <p id="transactions">0</p>
</div>
<div class="card">
    <h3>Total Quantity</h3>
    <p id="totalQty">0 kg</p>
  </div>
  
  <div class="card">
    <h3>Total Sales</h3>
    <p id="totalSales">₹0</p>
  </div>
    
    
    
  </div>

  
    
  </div>
  <div id="map" style="height:300px; border-radius:12px;"></div>

</div>

  

  
  <input type="file" id="photoUpload" accept="image/*">
<img id="preview" width="120" style="margin-top:10px;">
<button type="button" onclick="analyzeImage()">Analyze Waste</button>

<p id="aiResult"></p>
<div id="buyerPanel">
  <h3>Buyer – Find Material</h3>

  
</div>



</form>

  </div>
  

<!-- Dashboard Content Above -->

<div id="modal" class="modal">
    <div class="modal-content">
      <span onclick="closeModal()">×</span>
      <p id="modalText">Hello</p>
    </div>
  </div>
  <div id="loader" class="loader"></div>
  <div id="profileModal" class="modal">
    <div class="modal-content">
      <span onclick="closeProfile()">×</span>
      <h3>My Profile</h3>
      <p id="pName"></p>
      <p id="pEmail"></p>
      <p id="pPhone"></p>
      <p id="pLocation"></p>
  
      <h3>My Orders</h3>
      <ul id="orderList"></ul>
    </div>
  </div>
  
</div>   <!-- ADD THIS -->

  
  


  <div class="card">Live Marketplace Analytics</div>

  <div id="toast" class="toast">Success</div>
  <div class="card">
    <input id="buyerSearch" placeholder="Search Material">
<button onclick="searchTable()">Search</button>




    <table id="materialTable">
      <tr>
      <th>Material</th>
      <th>Qty</th>
      <th>Location</th>
      <th>Price</th>
      <th>Status</th>
      <th>Track</th>
      </tr>
      </table>
      
        <div class="card">
          <h3>Material Location Map</h3>
          <iframe
          id="mapFrame"
          width="100%"
          height="300"
          style="border:0; border-radius:12px;">
        </iframe>
        
        
        </div>
        
        
    
  
    
  </div>
  
  <footer>
    Built for Hackathon 2026
  </footer>
  <script src="script.js"></script>
  <script>
    loadProfile();
  </script>
  <script>
    loadBuyerNotifications();
  </script>
  <script>
    loadMaterialsFromBackend();
  </script>
  
  </body>
  </html>
  
